<div class="container">
    <div class="article-section">
        <h2 class="article-title mb-4 text-center">Add Article</h2>
    
        <form [formGroup]="articleForm" (ngSubmit)="onSubmit()">
            <div class="form-group mb-3">
                <label for="title" class="mb-2" >Title</label>
                <input class="form-control"
                    type="text"
                    formControlName="title"
                    [ngClass]="{'is-invalid': articleForm.get('title')?.errors && articleForm.get('title')?.touched && (articleForm.get('title')?.invalid || articleForm.get('title')?.dirty) }"            />
                <div *ngIf="articleForm.get('title')?.touched" class="ml-2 invalid-feedback">
                    <div *ngIf="articleForm.get('title')?.hasError('required')">Title Is required</div>
                    <div *ngIf="articleForm.get('title')?.hasError('minlength')">Minimum 3 characters required</div>
                </div>
            </div>
        

        <div class="form-group mb-3">
            <label for="author" class="mb-2">Author Name</label>
            <input class="form-control"
                type="text"
                formControlName="author"
                [ngClass]="{'is-invalid': articleForm.get('author')?.errors && articleForm.get('author')?.touched && (articleForm.get('author')?.invalid || articleForm.get('author')?.dirty) }"            />
            <div *ngIf="articleForm.get('author')?.touched" class="ml-2 invalid-feedback">
                <div *ngIf="articleForm.get('author')?.hasError('required')">Author name is required</div>
                <div *ngIf="articleForm.get('author')?.hasError('minlength')">Minimum 2 characters required</div>
            </div>
        </div>

        <div class="form-group mb-3">
            <label for="image">Article Image</label>
            <div class="custom-file-upload">
                <input
                    type="file"
                    class="file-input"
                    (change)="onImageSelect($event)"
                    accept="image/*"
                    formControlName="image"
                    [ngClass]="{'is-invalid': articleForm.get('image')?.errors && articleForm.get('image')?.touched}"
                    hidden
                    #fileInput>
                <div class="drop-zone" (click)="fileInput.click()" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
                    <div *ngIf="!selectedImage" class="placeholder">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag and drop an image or click to select</p>
                    </div>
                    <img *ngIf="selectedImage" [src]="selectedImage" class="preview-image" alt="Preview">
                </div>
            </div>
            <div *ngIf="articleForm.get('image')?.touched" class="ml-2 invalid-feedback">
                <div *ngIf="articleForm.get('image')?.hasError('required')">Image is required</div>
                <div *ngIf="articleForm.get('image')?.hasError('invalidFormat')">Invalid image format</div>
            </div>
        </div>

        <div class="form-group">
            <label for="content" class="mb-2">Content</label>
            <textarea 
                class="form-control"
                type="text"
                formControlName="content"
                [ngClass]="{'is-invalid': articleForm.get('content')?.errors && articleForm.get('content')?.touched && (articleForm.get('content')?.invalid || articleForm.get('content')?.dirty) }"
            ></textarea>
            <div *ngIf="articleForm.get('content')?.touched" class="ml-2 invalid-feedback">
                <div *ngIf="articleForm.get('content')?.hasError('required')">Content Is required</div>
                <div *ngIf="articleForm.get('content')?.hasError('minlength')">Minimum 10 characters required</div>
            </div>
        </div>

        <div class="text-center">
            <button type="submit" class="mt-4 btn save-btn">Save</button>
        </div>
    </form>
</div>
